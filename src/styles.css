/* =======================
   Paleta + tipografía
   ======================= */
:root{
  /* Paleta armonizada */
  --bg:#0b1220;              /* fondo app */
  --surface:#111a34;         /* tarjetas/popup/map shell */
  --surface-2:#0f152b;       /* modal/variantes */
  --border:#223057;          /* bordes */
  --text-1:#eaf1ff;          /* texto principal */
  --text-2:#c2cbe0;          /* texto secundario */
  --muted:#9aa8c7;           /* texto terciario */
  --accent:#6ee7b7;          /* verde suave */
  --accent-2:#60a5fa;        /* azul suave */
  --danger:#ff6b6b;
}

*{ box-sizing:border-box; }

html, body, #root { height: 100%; }

body{
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  font-family: Roboto, system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  color: var(--text-1);
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Enlaces */
a { color: #9ed0ff; text-decoration: none; }
a:hover { text-decoration: underline; }

/* Botones */
button { cursor:pointer; }
.btn{
  padding:10px 14px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#101a36;
  color:var(--text-1);
  font-weight:600;
  transition: transform .06s ease, border-color .2s ease;
}
.btn:hover{ border-color:#2b3c66; }
.btn:active{ transform: translateY(1px); }
.btn.primary{
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color:#08111f; border:none;
}

/* =======================
   Layout general
   ======================= */
.app{ min-height:100%; display:flex; flex-direction:column; }
.header{
  padding:16px 20px;
  display:flex; gap:12px;
  align-items:center; justify-content:space-between;
  background: transparent;
}
.brand{ font-weight:700; letter-spacing:.2px; }
.card{
  background: var(--surface);       /* sólido, sin transparencias */
  border:1px solid var(--border);
  border-radius:16px;
}

/* =======================
   Promoter picker + vistas
   ======================= */
.promos{ max-width:1000px; margin:16px auto 28px; padding:16px; }
.search{ display:flex; gap:8px; margin-bottom:12px; }
.input{
  flex:1; padding:12px 14px; border-radius:12px;
  border:1px solid var(--border);
  background:#0e1731; color:var(--text-1);
}
.grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:12px; }

/* Tarjeta de lista (armonizada) */
.promoItem{
  padding:14px; border-radius:14px;
  border:1px solid var(--border);
  background: var(--surface);       /* sólido */
  text-align:left;
}
.promoItem:hover{ border-color:#2b3c66; }
.promoName{ font-weight:700; color: var(--text-1); font-size:16px; }
.promoCount{ font-size:12px; color: var(--muted); }

/* Filas dentro de la tarjeta */
.promoItem .row{ margin-top:4px; font-size:14px; }
.promoItem .row.phone{ color:#cfe5ff; font-weight:600; } /* destaca número */
.promoItem .row.address{ color:var(--text-2); }          /* dirección legible */
.promoItem a{ color:#9ed0ff; }
.promoItem a:hover{ text-decoration:underline; }

/* Barra superior lista/mapa */
.toolbar{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
.badge{
  padding:6px 10px; border-radius:999px;
  background:#101a36;
  border:1px solid var(--border);
  font-size:12px; color:var(--text-2);
}
.legend{ margin-left:auto; font-size:12px; color:var(--muted); }

/* =======================
   Mapa
   ======================= */
.mapShell{
  display:grid; grid-template-rows: 1fr;
  height: calc(100vh - 90px);
  gap:10px; padding:10px;
  background: transparent;
}
.leaflet-container{
  width:100%; height:100%;
  border-radius:14px; border:1px solid var(--border);
  /* Fondo de seguridad cuando no hay tiles (modo offline/OSM no cargado) */
  background:
    linear-gradient(0deg, rgba(255,255,255,.02) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.02) 1px, transparent 1px),
    #0e1330;
  background-size: 24px 24px, 24px 24px;
}

/* Controles flotantes del mapa */
.mapControls{
  position:absolute;
  top:10px; left:10px;
  z-index:999;
  display:flex; gap:8px; flex-wrap:wrap;
}

/* Buscador visible en modo pantalla completa */
.mapSearch{
  padding:10px 12px; border-radius:12px;
  border:1px solid var(--border);
  background:#0e1731; color:var(--text-1);
  min-width:240px;
}

/* Pantalla completa real */
.mapShell.full{
  position:fixed; inset:0; z-index:100;
  height:100vh; width:100vw; padding:0; margin:0;
  border-radius:0;
}
.mapShell.full .leaflet-container{ border-radius:0; }

/* =======================
   Popup del mapa (sólido)
   ======================= */
.leaflet-popup.cleanPopup .leaflet-popup-content-wrapper{
  background: var(--surface);
  color: var(--text-1);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: 0 10px 22px rgba(0,0,0,.5);
}
.leaflet-popup.cleanPopup .leaflet-popup-tip{
  background: var(--surface);
  border: 1px solid var(--border);
}
.leaflet-popup-content{ margin: 10px 12px; }

/* Contenido del popup */
.popupCard{ min-width:230px; }
.popupTitle{ font-weight:700; margin:0; color:var(--text-1); }
.popupRow{ font-size:14px; color:var(--text-2); }
.popupPhoto{
  width:100%; max-height:180px; object-fit:cover;
  border-radius:10px; border:1px solid var(--border); margin-bottom:8px;
}

/* =======================
   Marcadores
   ======================= */
/* Ícono casita (SVG) */
.mini-house { 
  width: 26px; height: 26px;
  display: grid; place-items: center;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.45));
}
.mini-house svg { width: 26px; height: 26px; }

/* Punto neón (alternativa) */
.mini-dot2 {
  width: 18px; height: 18px; border-radius: 999px;
  border: 2px solid #fff;
  box-shadow: 0 2px 10px rgba(0,0,0,.4), 0 0 0 3px rgba(255, 204, 0, .35);
}

/* Hover sutil si el marker es un divIcon */
.leaflet-marker-icon .mini-house,
.leaflet-marker-icon .mini-dot2 { transition: transform .12s ease; }
.leaflet-marker-icon:hover .mini-house,
.leaflet-marker-icon:hover .mini-dot2 { transform: scale(1.08); }

/* =======================
   Clusters Leaflet
   ======================= */
.marker-cluster div {
  background: #0f1a36;
  color: var(--text-1);
  border: 2px solid var(--border);
  border-radius: 999px;
  box-shadow: 0 2px 10px rgba(0,0,0,.35), inset 0 0 0 2px rgba(96,165,250,.25);
  font-weight: 700;
}
.marker-cluster-small div  { width: 28px; height: 28px; line-height: 24px; }
.marker-cluster-medium div { width: 34px; height: 34px; line-height: 30px; }
.marker-cluster-large div  { width: 42px; height: 42px; line-height: 38px; }

/* =======================
   Modal de detalle (sólido)
   ======================= */
.modal-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.55);
  display:flex; align-items:center; justify-content:center; z-index:1000;
}
.modal{
  width:min(92vw, 580px); max-height:85vh; overflow:auto;
  background: var(--surface-2);
  border:1px solid var(--border);
  border-radius:16px; padding:16px;
  color: var(--text-1);
}
.modal header{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px; }
.modal h3{ margin:0; color:var(--text-1); }
.modal .meta{ font-size:13px; color:var(--text-2); }
.modal .photo{
  width:100%; border-radius:12px; border:1px solid var(--border);
  margin:10px 0; max-height:240px; object-fit:cover;
}
.modal .row{ font-size:14px; margin:4px 0; color:var(--text-2); }

/* =======================
   Responsive
   ======================= */
@media (max-width: 640px){
  .promos{ margin:8px 10px; }
  .mapShell{ height:calc(100vh - 70px); padding:8px; }
  .leaflet-container{ border-radius:10px; }
}
